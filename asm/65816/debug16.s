
 KEEP DEBUG16

 65816 ON
 MSB ON
 LONGA OFF
 LONGI OFF

 ***********************************************
 * *
 * DEBUG16 *
 * A 65816 DEBUGGER *
 * *
 * *
 ***********************************************

 ORG $8000

 MAIN START

 USING MN
 USING ATRIBL


 DPAGE GEQU $300 LOCATION OF THIS APPLICATION’S
 ; DIRECT PAGE

 ; DIRECT PAGE STORAGE
 ; TRACE REGISTERS
 ;

 PCREG GEQU $80 PROGRAM COUNTER
 PCREGH GEQU PCREG+1
 PCREGB GEQU PCREGH+1 INCLUDING BANK

 NCODE GEQU PCREGB+1 NEXT CODE TO BE TRACED

 OPCREG GEQU NCODE+1 OLD PROGRAM COUNTER VALUE
 OPCREGH GEQU OPCREG+1
 OPCREGB GEQU OPCREGH+1

 CODE GEQU OPCREGB+1 CURRENT CODE TO BE TRACED

 OPRNDL GEQU CODE+1 OPERANDS OF CURRENT
 OPRNDH GEQU OPRNDL+1 INSTRUCTION
 OPRNDB GEQU OPRNDH+1


 XREG GEQU OPRNDB+1 X REGISTER
 XREGH GEQU XREG+1

 YREG GEQU XREGH+1 Y REGISTER
 YREGH GEQU YREG+1

 AREG GEQU YREGH+1 ACCUMULATOR
 AREGH GEQU AREG+1

 STACK GEQU AREGH+1 STACK POINTER
 STACKH GEQU STACK+1


 DIRREG GEQU STACKH+1 DIRECT PAGE REGISTER
 DIRREGH GEQU DIRREG+1

 DBREG GEQU DIRREGH+1 DATA BANK REGISTER

 PREG GEQU DBREG+1 P STATUS REGISTER

 EBIT GEQU PREG+1 E BIT

 TEMP GEQU EBIT+2 TEMPORARY
 TEMPH GEQU TEMP+1
 TEMPB GEQU TEMPH+1


 ADDRMODE GEQU TEMPB+1 ADDRESS MODE OF CURRENT OPCODE

 MNX GEQU ADDRMODE+1 MNEMONIC INDEX
 ; FROM ATTRIBUTE TABLE

 OPLEN GEQU MNX+2 LENGTH OF OPERATION,
 ; INCLUDING INSTRUCTION

 CR GEQU $8D CARRIAGE RETURN


 M GEQU $20 SYBOLIC NAMES FOR
 X GEQU $10 STATUS REGISTER BITS
 C GEQU $01



 4C008

 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; LIST
 ; MAIN LOOP OF DISASSEMBLER FUNCTION
 ;
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;


 LIST ENTRY
 08 PHP SAVE ORIGINAL FLAGS
 18 CLC
 FB XCE SET NATIVE MODE
 08 PHP SAVE PREVIOUS MODE

 0B PHD SAVE CURRENT DP
 F40003 PEA DPAGE
 2B PLD SET TO NEW DP

 TOP ANOP

 C220 REP #M
 E210 SEP #X
 LONGA ON
 LONGI OFF

 649D STZ MNX CLEAR MNEMONIC INDEX
 A580 LDA PCREG MOVE PROGRAM COUNTER
 8584 STA OPCREG TO ‘OLD PROGRAM COUNTER’
 A682 LDX PCREGB INCLUDING BANK
 8686 STX OPCREGB
 A780 LDA [PCREG] GET NEXT INSTRUCTION
 AA TAX
 8687 STX CODE SAVE AS ‘CODE’

 200080 JSR UPDATE UPDATE ATTRIBUTE VARIABLES

 200080 JSR FLIST FORM OBJECT CODE, MNEMONIC
 200080 JSR FRMOPRNND FORM OPERAND FIELD
 200080 JSR PAUSE CHECK FOR USER PAUSE
 9005 BCC QUIT
 200080 JSR PRINTLN PRINT IT

 80DA BRA TOP LOOP TIL END

 2B QUIT PLD RESTORE ENVIRONMET,
 28 PLP RETURN TO CALLER
 FB XCE
 28 PLP
 60 RTS
 END


IST – FORM IMAGE OF PROGRAM COUNTER,
JECT CODE, AND MNEMONIC IN ‘LINE’

QUIRES ATTRIBUTE VARIABLES TO BE PREVIOUSLY INITIALIZED
LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL


T START
G MN

80 JSR CLRLN BLANK ‘LINE’ VARIABLE

 E230 SEP #M+X SHORT REGISTERS
 LONGA OFF
 LONGI OFF

 A000 LDY #0
 A586 LDA OPCREGB GET BANK BYTE, FORM AS HEX
 200080 JSR PUTHEX STRING
 A9BA LDA #’:’ BANK DELIMITER
 990080 STA LINE,Y
 C8 INY
 A585 LDA OPCREGH GET BYTES OF PROGRAM COUNTER
 200080 JSR PUTHEX FORM AS HEX STRING IN
 A584 LDA OPCREG LINE
 200080 JSR PUTHEX

 A00A LDY #10
 A587 LDA CODE STORE OPCODE AS HEX STRING
 20080 JSR PUTHEX
 A201 LDX #1

 E49F MORE CPX OPLEN LIST OPERANDS, IF ANY
 F008 BEQ DONE
 B587 LDA OPRNDL-1,X
 200080 JSR PUTHEX
 E8 INX
 80F4 BRA MORE

 C23 DONE REP #M+X
 LONGA ON
 LONGI ON

 A59D LDA MNX GET MNEMONIC INDEX,
 0A ASL A MULTIPLY BY THREE
 18 CLC (TIMES TWO PLUS SELF)
 659D ADC MNX
 18 CLC
 690080 ADC #MN
 AA TAX INDEX INTO MNEMONIC TABLE
 A01480 LDY #LINE+20 COPY INTO ‘LINE’
 A90200 LDA #2
 MOVE ENTRY
 540000 MVN 0,0

 60 RTS
 END

 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; FRMOPRND – –
 ; FORMS OPERAND FIELD OF DISASSEMBLED INSTRUCTION
 ;
 ; OPLEN, ADDRMODE, AND OPRND MUST HAVE BEEN
 ; INITIALIZED BY ‘UPDATE’
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;

 FRMOPRND START
 USING MODES
 E230 SEP #M+X
 LONGA OFF
 LONGI OFF

 A01C LDY #28 OFF SET INTO ‘LINE’ FOR OPERAND
 ; TO BEGIN
 A59C LDA ADDRMODE GET ADDRESS MODE, MULTIPLY BY
 0A ASL A TWO, JUMP THROUGHT ADDRESS
 AA TAX MODE JUMP TABLE TO PROPER
 7C0080 JMP (MODES,X) HANDLER


 FIMM ENTRY IMMEDIATE MODE – –
 A9A3 LDA #’#’ OUTPUT POUND SIGN,
 990080 STA LINE,Y ONE OR TWO
 C8 INY OPERAND BYTES, DEPENDING
 A59F LDA OPLEN ON OPLEN
 C902 CMP #2
 F003 BEQ GOSHORT
 4C0080 JMP PODB
 4C0080 GOSHORT JMP POB

 FABS ENTRY ABSOLUTE MODE – –
 4C0080 JMP PODB JUST OUTPUT A DOUBLE BYTE

 FABSL ENTRY ABSOLUTEW LONG – –
 4C0080 JMP POTB OUTPUT A TRIPLE BYTE

 FDIR ENTRY DIRECT MODE – –
 4C0080 JMP POB OUTPUT A SINGLE BYTE

 FACC ENTRY ACCUMULATOR – –
 A9C1 LDA #’A’ JUST AN A
 990080 STA LINE,Y
 60 RTS

 FIMP ENTRY IMPLIED – –
 60 RTS NO OPERAND

 FINDINX ENTRY INDIRECT INDEXED – –
 20B600 JSR FIND CALL ‘INDIRECT’, THEN FALL
 ; THROUGH TO INDEXED BY Y

 FINY ENRTY INDEXED BY Y MODES – –
 A9AC LDA #’,’ TACK ON A ‘COMMA,Y’
 990080 STA LINE,Y
 C8 INY
 A9D9 LDA #’Y’
 990080 STA LINE,Y
 60 RTS

 FINDINXL ENTRY INDIRECT INDEXED LONG – –
 20C600 JSR FINDL CALL ‘INDIRECT LONG’, THEN
 4C3000 JMP FINY EXIT THROUGH INDEXED BY Y

 FINXIND ENTRY INDEX INDIRECT – –
 A9A8 LDA #’(’ PARENTHESIS
 990080 STA LINE,Y
 C8 INY
 200080 JSR POB A SINGLE BYTE – –
 206000 JSR FINX COMMA, X
 A9A9 LDA #’)’ CLOSE.
 990080 STA LINE,Y
 60 RTS

 FDIRINXX ENTRY DIRECT INDEXED BY X – –
 200080 JSR POB OUTPUT A BYTE,
 4C6000 JMP FINX TACK ON COMMA, X

 FDIRINXY ENTRY DIRECT INDEXED BY Y – –
 200080 JSR POB OUTPUT A BYTE,
 4C3000 JMP FINY TACK ON COMMA, Y

 FINX ENTRY INDEXED BY X – –
 A9AC LDA #’,’ TACK ON A
 990080 STA LINE,Y COMMA, X
 C8 INY (USED BY SEVERAL
 A9D8 LDA #’X’ MODES)
 990080 STA LINE,Y
 C8 INY
 60 RTS

 FABSX ENTRY ABSOLUTE INDEXED BY X – –
 200080 JSR PODB OUTPUT A DOUBLE BYTE,
 4C6000 JMP FINX TACK ON A COMMA, X

 FABSLX ENTRY ABSOLUTE LONG BY X – –
 200080 JSR POTB OUTPUT A TRIPLE BYTE,
 4C6000 JMP FINX TACK ON COMMA, X

 FABSY ENTRY ABSOLUTE Y – –
 200080 JSR PODB OUTPUT A DOUBLE BYTE,
 4C3000 JMP FINY TACK ON COMMA,Y

 FPCR ENTRY PROGRAM COUNTER RELATIVE – –
 A9FF LDA #$FF SIGN EXTEND OPERAND
 EB XBA
 A588 LDA OPRNDL
 C221 REP #M+C
 LONGA ON
 3003 BMI OK
 297F00 AND #$7F
 6584 OK ADC OPCREG ADD TO PROGRAM COUNTER
 1A INC A ADD TWO, WITHOUT CARRY
 1A INC A
 8588 STA OPRNDL STORE AS NEW ‘OPERAND’

 E220 SEP #M
 LONGA OFF

 4C0080 JMP PODB NOW JUST DISPLAY A DOUBLE BYTE

 FCPRL ENTRY PROGRAM COUNTER RELATIVE LONG

 C221 REP #M+C
 LONGA ON

 A588 LDA OPRNDL JUST ADD THE OPERAND
 6584 ADC OPCREG
 18 CLC BUMP BY THREE, PAST INSTRCTION
 690300 ADC #3
 8588 STA OPRNDL STORE AS NEW ‘OPERAND’

 E220 SEP #M
 LONGA OFF

 4C0080 JMP PODB PRINT A DOUBLE BYTE

 FABSIND ENTRY ABSOLUTE INDIRECT
 A9A8 LDA #’(‘ SURROUND A DOUBLE BYTE
 990080 STA LINE,Y WITH PARENTHESES
 C8 INY
 200080 JSR PODB
 A9A9 LDA #’)’
 990080 STA LINE,Y
 60 RTS

 FIND ENTRY INDIRECT – –
 A9A8 LDA #’(‘ SURROUND A SINGLE BYTE
 990080 STA LINE,Y WITH PARENTESES
 C8 INY
 200080 JSR POB
 A9A9 LDA #’)’
 990080 STA LINE,Y
 C8 INY
 60 RTS

 FINDL ENTRY INDIRECT LONG – –
 A9DB LDA #’[‘ SURROUND A SINGLE BYTE
 990080 STA LINE,Y WITH SQUARE BRACKTS
 C8 INY
 200080 JSR POB
 A9DD LDA #’ ]’
 990080 STA LINE,Y
 C8 INY
 60 RTS

 FABSINXIND ENTRY ABSOLUTE INDIRECT INDEXED
 A9A8 LDA #’(‘
 990080 ST5A LINE,Y SURROUND A CALL TO ‘ABSOLUTE
 C8 INY INDEXED’ WITH PARENTESES
 206D00 JSR FABSX
 A9A9 LDA #’)’
 990080 STA LINE,Y
 60 RTS

 FSTACK ENTRY STACK – – IMPLIED
 60 RTS

 FSTACKREL ENTRY STACK RELATIVE
 202300 JSR JUST LIKE
 A9AC LDA DIRECT INDEXED, BUT WITH
 990080 STA AN ‘S’
 C8 INY
 A9D3 LDA #’S”
 990080 STA LINE,Y
 C8 INY
 60 RTS


 FSRINDINX ENTRY STACK RELATIVE INDIRECT INDEX
 A9A8 LDA #’(‘
 990080 STA LINE,Y SURROUND STACK RELATIVE WITH
 C8 INY PARENTHESES, THEN
 20E600 JSR FSTACKREL
 A9A9 LDA #’)’
 990080 STA LINE,Y
 C8 INY
 4C3000 JMP FINY TACK ON A COMMA,Y


 FBLOCK ENTRY BLOCK MOVE

 C220 REP #M
 A588 LDA OPRNDL MAKE HUMAN-READABLE:
 EB XBA SWAP SOURCE, DEST
 8588 STA OPRNDL
 E220 SEP #M

 200080 JSR POB OUTPUT THE SOURCE
 A9AC LDA #’,’ THEN COMMA
 990080 STA LINE,Y
 C8 INY
 EB XBA SWAP DEST INTO OPRNDL
 8588 STA OPRNDL THEN PRINT ONE BYTE
 4C0080 JMP POB


 END

 ;LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; POB, PODB, POTB
 ; PUT OPERAND (DOUBLE, TRIPLE) BYTE
 ;
 ; PUTS OPRNDL (OPRNDH, OPRNDB) IN LINE AS HEX VALUE
 ; WITH ‘$’ PREFIX
 ;
 ; ASSUMES SHORT ACCUMULATOR AND INSEX REGISTERS
 ; (CALLED BY FOPRND)
 ;LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;



 POB START
 LONGA OFF
 LONGI OFF

 ; PRINT:
 A200 LDX #0 ONE OPERAND BYTE
 8006 BRA IN SKIP
 PODB ENTRY
 A201 LDX #1 TWO OPERAND BYTES
 8002 BRA IN SKIP
 POTB ENTRY
 A202 LDX #2 THREE OPERAND BYTES
 ; FALL THROUGH
 A9A4 IN LDA #’$’ PRINT LEAD-IN
 990080 STA LINE,Y
 C8 INY

 B588 MORE LDA OPRNDL,X LOOP THROUGH OPERAND
 200080 JSR PUTHEX HIGH TO LOW
 CA DEX
 10F8 BPL MORE
 60 RTS
 END



 APPEND DB. UTILITY


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; STEP CHECKS FOR USER PAUSE SIGNAL
 ; (KEYSTROKE)
 ;
 ; CONTAINS MACHINE-DEPENDENT CODE
 ; FOR APPLE I I
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;

 STEP START
 KEYBD EQU $C000
 KEYYSTB EQU $C010
 ESC EQU $9B ESCAPE KEY (HIGH BIT SET)
 V EQU $40 MASK FOR OVERFLOW FLAG
 LONGA OFF
 LONGI OFF

 08 PHP SAVE MODES
 E230 SEP #M+X
 800B BRA WAIT

 PAUSE ENTRY ENTRY FOR ‘PAUSE’ CALL
 08 PHP
 E230 SEP #M+X
 AD00C0 LDA KEYBD CHECK FOR KEYPRESS
 101B BPL RETNCR NONE; DON’T PAUSE
 8D10C0 STA KEYSTB CLEAR STROBE
 ; IF KEYSTROKE
 AD00C0 WAIT LDA KEYBD LOOP FOR NEXT KEY
 10FB BPL WAIT
 8D10C0 STA KEYSTB CLEAR STROBE
 C998 CMP #ESC IF ESC RETURN WITH
 D004 BNE RETNESC

 28 RETEQ PLP CARRY CLEAR (QUIT)
 EA NOP
 18 CLC
 60 RTS

 C98D RETNESC CMP #CR
 D004 BNE RETNCR
 28 PLP
 E241 SEP #C+V
 60 RTS

 8D10C0 RETNCR STA KEYSTB
 28 PLP ELSE SET
 38 SEC
 B8 CLV
 60 RTS (CONTINUE)
 END


 ;
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ; PUTHEX
 ;
 ; CONVERTS NUMBER IN ACCUMULATOR TO HEX STRING
 ; STORED AT LINE,Y
 ;
 ; SAVE AND RESTORED MODE FLAGS
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;



 PUTHEX START
 08 PHP SAVE MODE FLAGS
 200D00 JSR MAKEHEX GET ASCII CODES A, B
 C220 REP #M
 LONGA ON
 990080 STA LINE,Y PUT TWO BYTES AT LINE
 C8 INY INCREMENT Y PAST THEM
 C8 INY
 28 PLP RESTORE MODE
 60 RTS RETURN

 E230 MAKEHEX SEP $M+X ALL EIGHT BIT
 LONGA OFF
 LONGI OFF

 48 PHA SAVE VALUE TO BE CONVERTED
 290F AND #$OF MASK OFF LOW NIBBLE
 201B00 JSR FORMNIB CONVERT TO HEX
 EB XBA STORE IN B
 68 PLA RESTORE VALUE
 4A LSR A SHIFT HIGH NIBBLE
 4A LSR A TO LOW NIBBLE
 4A LSR A
 4A LSR A
 ; FALL THROUGH TO CONVERT

 C90A FORMNIB CMP #$A IF GREATER THAN OR EQUAL TO
 B004 BGE HEXDIG 10, USE DIGITS A . . F
 18 CLC ELSE SIMPLY ADD ‘0’ TO
 69B0 ADC #’0’ CONVERT TO ASCII
 60 RTS

 69B6 HEXDIG ADC $’A’-11 SUBTRACT 11, ADD ‘A’
 60 RTS (SORT OF)

 END

 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; CLRLN
 ;
 ; CLEARS ‘LINE’ WITH BLANKS
 ;
 ; SAVES AND RESTORES MODE FLAGS
 ;
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;


 CLRLN START
 08 PHP
 C230 REP #M+X
 LONGA ON
 LONGI ON

 A9A0A0 LDA #’ ‘
 A24400 LDX #68

 9D1200 LOOP STA LINE,X
 CA DEX
 CA DEX
 10F9 BPL LOOP
 28 PLP
 60 RTS


 LINE ENTRY
 A0A0A0A0 DC 70C’ ‘
 8D00 DC H’8D00’
 END


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; UPDATE
 ;
 ; UPDATES ATTRIBUTE VARIABLES BASED ON OPCODE
 ; PASSED IN ACCUMULATOR BY LOOKING IN ATTRIBUTE
 ; TABLES
 ;
 ; SAVES AND RESTORES MODE FLAGS
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;


 UPDATE START
 USING ATRIBL


 LDYI EQU $A0+2 OPCODE VALUE TIMES TWO
 LDXI EQU $A2+2

 08 PHP SAVE STATE
 C230 REP #M+X
 LONGA ON
 LONGI ON

 29FF00 AND #$FF MASK HIGH BYTE
 0A ASL A TIMES TWO

 AS TAY
 B90080 LDA ATRIBL,Y INDEX INTO ATTRIBUTE TABLE
 EB XBA SWAP ORDER OF ENTRIES
 859C STA ADDRMODE SAVE ADDRMODE, MNEMONIC INDEX

 AA TAX ADDRMODE TO X (LOW)
 98 TYA OPCODE * 2 TO ACCUM
 E210 SEP #X
 LONGI OFF

 BCFF7F LDY LENS-1,X GET LENGTH OF OPERATION
 849F STY OPLEN


 A697 LDX EBIT EMULATION MODE?
 E001 CPX #1 TEST BIT ZERO
 F02E BEQ SHORT YES ALL IMMEDIATE ARE
 ; SHORT
 892000 BIT #$20 IS MSD+2 EVEN?
 D029 BNE SHORT NO, CAN’T BE IMMEDIATE
 C94401 CMP #LDXI IS IT LDX #?
 F00A BEQ CHKX
 891E00 BIT #$F+2 IS LSD+2 ZERO?
 D00E BNE CHKA CHECK ACCUMULATOR OPCODES
 C94001 CMP PREG MUST = LDY# OR GREATER
 9009 BLT CHKA NO, MAYBE ACCUMULATOR
 A596 LDA PREG IF IT IS, WHAT IS FLAG SETTING?
 291000 AND #X
 F011 BEQ LONG CLEAR – 16 BIT MODE
 D011 BNE SHORT SET – 8 BIT MODE

 291E00 CHKA AND #$0F+2 MASK OUT MSD
 C91200 CMP #$9+2 IS LSD = 9?
 D009 BNE SHORT
 A596 LDA PREG WHAT IS FLAG SETTING?
 292000 AND #M
 D002 BNE SHORT NO, 8 BIT MODE

 E69F LONG INC OPLEN LONG IMMEDIATE LENGTH IS
 ; ONE MORE THEN FOUND IN TABLE

 A000 SHORT LDY #0
 8005 BRA LOOPIN

 A780 LOOP [PCREG] LOAD 16 BITS 16 BIT MODE
 ; USED TO BUMP PCREG EASILY
 AA TAX TRUNCATE TO EIGHT BITS
 9687 STX ORPNDL-1,Y SAVE

 E680 LOOPIN INC PCREG MOVE PC PAST NEXT INSTRUCTION
 C8 INY BYTE
 C49F CPY OPLEN MOVED ALL OPERAND BYTES?
 D0F4 BNE LOOP NO, CONTINUE

 28 DONE PLP
 60 RTS
 END


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; PRINTLN
 ;
 ; MACHINE-DEPENDENT CODE TO OUTPUT
 ; THE STRING STORED AT ‘LINE’
 ;
 ; SAVES AND RESTORED MODE FLAGS
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;



 PRINTLN START
 COUT EQU $FDED APPLE CHARACTER OUTPUT ROUTINE

 08 PHP SAVE STATUS
 0B PHD SAVE DIRECT PAGE
 F40000 PEA 0 SWITCH TO PAGE ZERO
 2B PLD FOR EMULATION

 LONGA OFF
 LONGI OFF
 38 SEC SWITCH TO EMULATION
 FB XCE

 A000 LDY #0

 B90080 LOOP LDA LINE,Y LOOP UNTIL STRING TERMINATOR
 F006 BEQ DONE REACHED
 20EDFD JSR COUT
 C8 INY
 80F5 BRA LOOP

 18 DONE CLC RESTORE NATIVE MODE
 FB XCE
 2B PLD RESTORE DIRECT PAGE
 28 PLP RESTORE MODE FLAGS
 60 RTS

 END

 APPEND DB. TRACE


 ;
 ; TRACE
 ;
 ; ENTRY POINT FOR TRACER
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL


 TRACE START
 USRBRKV GEQU $3F0 USER BRK VECTOR FOR APPLE / /
 BRKN GEQU $FFE6 NATIVE MODE BRK VECTOR

 08 PHP SAVE CALLING STATE
 18 CLC
 FB XCE
 08 PHP

 C210 REP #$10
 LONGI ON
 F40000 PEA 0 OLD STACK BOUNDARY

 BA TSX
 8E3D00 STX SAVSTACK

 F40003 PEA DPAGE INITIALIZE DIRECT PAGE
 2B PLD

 8691 STX STACK

 E220 SEP #$20
 LONGA OFF

 A901 LDA #1
 8597 STA EBIT
 6493 STZ DIRREG DIRECT PAGE, DATA BANK
 6494 STZ DIRREGH TO POWER-UP DEFAULTS
 6495 STZ DBREG
 649E STZ MNX+1

 9C0080 STZ STEPCNTRL

 A20080 LDX #EBRKN PATCH BRK VECTORS
 8EF003 STX USRBRKV TO POINT TO TRACE CODE

 AEE6FF LDX BRKN FIND OUT WHERE BRKN POINTS TO
 E000C0 CPX #$C000 MAKE SURE IT’S RAM ON AN APPLE
 9003 BLT OK
 4C0080 JMP QUIT MIGHT AS WELL GIVE UP NOW . . .
 8E3F00 OK STX USRBRKN

 A780 LDA [PCREG] GET FIRST OPCODE
 4C0080 JMP TBEGIN BEGIN !

 SAVSTACK ENTRY
 0000 DS 2
 USRBRKN ENTRY
 0000 DS 2
 SAVRAM ENTRY
 0000 DS 2
 END

 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; EBRKIN, NBRKIN, TBGIN
 ;
 ; ENTRY POINTS FOR TRACER MAIN LOOP
 ; EBKIN AND NBKIN RECOVER CONTROL AFTER
 ; ‘BRK’ INSTRUCTION EXECUTED
 ; TBEGIN IS INITIAL ENTRY FROM ‘TRACE’
 ;
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;


 EBRKIN START ENTRY FROM EMULATION MODE
 ; FOR TRACER

 LONGA OFF
 LONGI OFF

 F40000 PEA 0
 4848 PHA
 A548 LDA $48 APPLE I I MONITOR
 48 PHA LOCATIONS
 A545 LDA $45 FOR P, AA
 A646 LDX $46 AND X

 ; note that if direct page is relocated
 ; in emulation mode, these locations
 ; will be used by monitor brk handler

 EE9703 INC EBIT+DPAGE MARK AS EMULATION MODE

 18 CLC GO NATIVE
 FB XCE

 NBRKIN ENTRY ENTRY FROM NATIVE MODE
 ; FOR TRACER

 C230 REP #M+X
 LONGA ON
 LONGI ON

 8B PHB SAVE DATA BANK
 0B PHD DIRECT PAGE
 F40003 PEA DPAGE SWITCH TO APPLICATION
 2B PLD DIRECT PAGE

 858F STA AREG STASH USER REGISTERS
 868B STX XREG
 848D STY YREG

 A301 LDA 1,S GET DIRECT PAGE VALUE
 8593 STA DIRREG SAVED

 3B TSC CALCULATE TRUE STACK
 18 CLC (BEFORE BRK)
 690700 ADC #7
 8595 STA STACK SAVE AS STACK

 A303 LDA 3,S SAVE DATA BANK, STATUS
 8595 STA DBREG STATUS REGISTER

 A94001 LDA #$140 SET UP SMALL STACK
 1B TCS

 4B PHK MAKE DATA BANK = PROGRAM BANK
 AB PLB
 AE0080 LDX USRBRKN RESTORE BORROWED RAM
 AD0180 LDA SAVRAM+1
 9D0100 STA !1,X
 AD0080 LDA SAVRAM
 9D0100 STA !0,X
 200080 JSR FLIST FORMAT DISASSEMBLY LINE
 200080 JSR FRMOPRND

 200080 JSR PRINTLN PRINT IT

 200080 JSR CLRLN
 200080 JSR DUMPREGS OUPUT REGISTER VALUES
 200080 JSR PRINTLN

 E220 SEP #M
 LONGA ON

 C210 REP STEPCNTRL
 LONGI DOPAUSE

 2CE000 BIT
 300E BMI

 200080 JSR STEP STEP ONE AT A TIME
 9068 BCC QUIT USER WANTS TO QUIT
 5011 BVC RESUME WANTS TO KEEP STEPPING
 A980 LDA #$80 HIT CR; WANTS TO TRACE, NOT
 8DE000 STA STEPCNTRL STEP SET FLAG
 800A BRA RESUME

 200080 DOPAUSE JSR PAUSE TRACING; ONLY WAIT IF USER
 905A BCC QUIT HITS KEY
 5003 BVC RESUME WANTS TO KEEP TRACING
 9CE000 STZ STEPCNTRL HIT CR; WANTS TO STEP, NOT
 ; TRACE CLEAR FLAG

 A583 RESUME LDA NCODE RESTORE ONLD ‘NEXT’; IT’S ABOUT
 8780 STA [PCREG] TO BE EXECUTED

 TBEGIN ENTRY
 AB TAY SAVE THE CURRENT (ABOUT TO BE
 ; EXECUTED) OPCODE

 A680 LDX PCREG REMEMBER WHERE YOU GOT IT FROM
 8684 STX OPCREG PCREG POINTED TO IT AFTER
 A582 LDA PCREGB PREVIOUS CALL TO UPDATE
 8586 STA OPCREGB

 98 TYA

 8587 STA CODE SAVE CURRENT OPCODE
 200080 JSR UPDATE UPDATE PC TO POINT PAST THIS
 ; INSTRUCTION
 ; UPDATE ATTRIBUTE VARIABLES

 200080 JSR CHKSPCL CHECK TO SEE IF THIS CAUSES A
 ; TRANSFER
 A780 LDA [PCREG] GET NEXT OPCODE TO BE EXECUTED
 ; (ON NEXT LOOP THROUGH)
 8583 STA NCODE SAVE IT
 A900 LDA #0 PUT A BREAK ($00) THERE TO
 ; REGAIN CONTROL
 8780 STA [PCREG]

 GO ENTRY
 C230 REP #M+X
 LONGA ON
 LONGI ON
 AE0080 LDX USRBRKIN BORROW THIS RAM FOT A SECOND
 BD0000 LDA !0,X
 8D0080 STA SAVRAM
 BD0100 LDA !1,X
 8D0180 STA SAVRAM+1
 A94C00 LDA #$4C
 9D0000 STA !0,X
 A91000 LDA #NBRKIN
 9D0100 STA !1,X
 A561 LDA STACK RESTORE STACK
 1B TCS
 D495 PEI (DBREG) GET THIS STUFF ON STACK
 D496 PEI (EBIT-1)
 D493 PEI (DIRREG)

 6497 STZ EBIT ASSUME NATIVE MODE ON RETURN

 A58F LDA AREG RESTORE USER REGISTERS
 A48D LDY YREG
 A68B LDX XREG

 2B PLD POP IT AWAY!

 28 PLP
 28 PLP
 FB XCE

 AB PLB
 28 PLP

 DC8403 JMP [DPAGE+OPCREG] ON TO THE NEXT!

 QUIT ENTRY
 E220 SEP #$20
 LONGA OFF

 A583 LDA NCODE CLEAN UP OLD PATCH
 8780 STA [PCREG]

 C210 REP #$10
 LONGI ON

 AE0080 LDX SAVSTACK GET ORIGINAL STACK POINTER
 E8 INX
 E8 INX
 9A TXS

 F40000 PEA 0 RESTORE ZERO PAGE
 2B PLD

 28 PLP
 FB XCE
 28 PLP
 60 RTS

 STEPCNTRL ENTRY
 00 DS 1
 END


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ; CHKSPCL
 ;
 ; CHECK CURRENT OPCODE (IN CODE) FOR SPECIAL CASES
 ; INSTRUCTIONS WHICH TRANSFER CONTROL (JMP, BRA, ETC.);
 ;
 ; ASSUMES SHORTA, LONGI CALLED BY EBRKIN
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;


 CHKSPCL START
 LONGA OFF
 LONGI ON

 A20000 LDX #SCX-SCODES
 A587 LDA CODE

 DD0080 LOOP CMP SCODES,X CHECK TO SEE IF CURRENT OPCODE
 F004 BEQ HIT IS IN EXCEPTION TABLE
 CA DEX
 10F8 BPL LOOP
 60 RTS EXIT IF NOT


 E210 HIT SEP #X
 LONGI OFF

 8A TXA IF INDEX WAS LESS THAN 9, IT’S
 C909 CMP #9 A BRANCH
 B00F BGE NOTBR

 4A LSR A SEE IF ‘ODD OR EVEN’
 AA TAX
 BD0080 LDA PHASK,X GET MASK TO SELECT CORRECT
 ; PREG BIT
 2596 AND PREG IS IT SET?

 B003 BCS BBS IF INDEX WAS ODD, BRANCH IF
 ; PREG BIT IS SET
 F00B BEQ DOBRANCH ELSE IF EVEN, BRANCH IF CLEAR
 60 RTS

 D008 BBS BNE DOBRANCH “BRANCH IF BIT SET”
 60 RTS

 0A NOTBR ASL A NOT A BRANCH INSTRUCTION;
 ; MULTIPLY BY TWO
 AA TAX AND INDEX INTO HANDLER JUMP
 TABLE
 C210 REP #X
 7CEE7F JMP (SPJMP-18,X) BIAS JUMP TABLE BY 9

 DOBRANCH ENTRY
 A9FF LDA #$FF SET ACCUMULATOR BYTE HIGH
 ; (ANTICIPATE NEGATIVE)
 EB XBA AND SIGN EXTEND INTO X

 A588 LDA OPRNDL

 C231 REP #M+X+C MAKE REGS LONG; CLEAR CARRY
 LONGA ON (ANTICIPATE ADC)
 LONGI ON

 3003 BMI OK NUMBER WAS NEGATIVE; ALL IS OK

 297F00 AND #$7F CLEAR HIGH BYTE OF ACCUM
 ; (POSITIVE NUMBER)
 6580 OK ADC PCREG
 8580 STA PCREG
 E220 SEP #M RETURN WITH ACCUM SHORT
 60 RTS
 END

 SBRK START THESE ARE NOT IMPLEMENTED!
 SRTI ENTRY (AN EXERCISE FOR READER)
 SCOP ENTRY
 60 RTS

 SJSRABS ENTRY ABSOLUTES
 SJMPABS ENTRY
 A688 LDX OPRNDL MOVE OPERAND TO PC
 8680 STX PCREG
 60 RTS

 SBRL ENTRY LONG BRANCH
 C221 REP #M+C LONG ACCUM AND CLEAR CARRY
 LONGA ON
 A588 LDA OPRNDL ADD DISPLACMENT TO
 6580 ADC PCREG PROGRAM COUNTER
 8580 STA PCREG
 E220 SEP #M
 LONGA OFF
 60 RTS

 SJSRABSL ENTRY ABSOLUTE LONGS
 SJMPABSL ENTRY
 A688 LDX OPRNDL MOVE OPERAND, INCLUDING BANK,
 8680 STX PCREG TO PROGRAM COUNTER
 A58A LDA OPRNDB
 8582 STA PCREGB
 60 RTS

 SRTS ENTRY RETURN
 A691 LDX STACK PEEK ON STACK
 EC0080 CPX SAVSTACK IF ORIGINAL STACK . . .
 D003 BNE CONT
 4C0080 JMP QUIT RETURN TO MONITOR
 E8 CONT INX

 C220 REP #M
 BF000000 LDA >0,X ALWAYS IN BANK ZERO
 1A INC A ADD ONE TO GET TRUE RETURN
 8580 STA PCREG VALUE
 E220 SEP #M

 60 RTS


 SRTL ENTRY RETURN LONG
 201A00 JSR SRTS DO NORMAL RETURN,

 E8 INX THEN GET BANK BYTE
 E8 INX
 BF000000 LDA >0,X A IS NOW SHORT FOR BANK BYTE
 8582 STA PCREGB
 60 RTS


 SJMPIND ENTRY INDIRECT
 A688 LDX OPRNDL GET OPERAND

 C220 REP #M
 BF000000 LDA >0,X JMP IND ALWAYS IN BANK ZERO
 8580 STA PCREG
 E220 SEP #M
 60 RTS


 SJMPINDL ENTRY
 203D00 JSR SJMPIND SAME AS JMP INDIRECT,
 E8 INX PLUS BANK BYTE
 E8 IJNX
 BF000000 LDA >0,X ACCUM IS SHORT NOW
 8582 STA PCREGB
 60 RTS


 SJMPINDX ENTRY INDEX JUMPS
 SJSRINDX ENTRY
 A48B LDY XREG LET CPU DO ADDITION
 A688 LDX OPRNDL GET INSIRECT POINTER
 8699 STX TEMP
 A582 LDA RCREGB INDEXED JUMPS ARE IN PROGRAM
 859B STA TEMP+2 BANK

 C220 REP #M
 B799 LDA [TEMP],Y ‘Y IS X’
 8680 STA PCREG
 E220 SEP #M

 60 RTS


 END


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; DUMPREGS
 ;
 ; DISPLAYS CONTENTS OF REGISTER VARIABLES IN ‘LINE’
 ;
 ; SAVES AND RESTORES MODE
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;

 DUMPREGS START
 08 PHP
 E230 SEP #M+X
 LONGA OFF
 LONGI OFF

 A000 LDY #0

 A903 LDA #>DPAGE STOE DPAGE HIGH IN TEMP HIGH
 859A STA TEMPH

 A209 LDX #ENDTABLE-TABLE LENGTH OF COMMAND TABLE

 BD4400 LOOP LDA TABLE,X GET ADDRESS OF NEXT REGISTER
 8599 STA TEMP
 CA DEX
 BD4400 LDA TABLE,X GET REGISTER ‘NAME’
 200080 JSR PUTREG16
 CA DEX
 10F1 BPL LOOP

 1995 LDA #DBREG NOW ALL THE 8-BIT REGISTERS
 8599 STA TEMP
 A9C2 LDA #’B’
 200080 JSR PUTREG8
 A996 LDA #PREG
 8599 STA TEMP
 A9D0 LDA #’P’
 200080 JSR PUTREG8
 A9C5 LDA #’E’
 990080 STA LINE,Y
 C8 INY
 A9BA LDA #’:’
 990080 STA LINE,Y
 C8 INY

 A9B0 LDA #’0’
 A697 LDX EBIT
 F001 BEQ OK
 1A INC A ‘0’ BECOMES ‘1’
 990080 OK STA LINE,Y


 28 PLP
 60 RTS

 C494 TABLE DC C’D’,I1’DIRREGH’ DIRECT PAGE
 D392 DC C’S’,I1’STACKH’ ADDRESS OF
 D98E DC C’Y’,I1’YREGH’ REGISTER
 D88C DC C’X’,I1’XREGH’ VARIABLES
 C1 DC C’A’
 90 ENDTABLE DC I1’AREGH’
 END


 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; PUTREGS
 ;
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;



 PUTREG8 START
 990080 STA LINE,Y A CONTAINS REGISTER ‘NAME’
 C8 INY
 A9BC LDA #’=’ EQUALS . .
 990080 STA LINE,Y
 C8 INY
 8012 BRA PRIN USE PUTREG16 CODE

 PUTREG16 ENTRY
 990080 STA LINE,Y A CONTAINS REGISTER ‘NAME’
 C8 INY
 A9BD LDA #’=’ EQUALS . .
 990080 STA LINE,Y
 C8 INY
 C8 INY
 B299 LDA (TEMP) TEMP POINTS TO REGISTER
 C699 DEC TEMP VARIABLE HIGH
 200080 JSR PUTHEX

 C8 PRIN INY
 B299 LDA (TEMP) TEMP POINTS TO REGISTER
 20080 JSR PUTHEX VARIABLE LOW (OR 8 BIT)
 C8 INY
 60 RTS
 END

 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; SP JMP
 ; JUMP TABLE FOR ‘SPECIAL’ OPCODE HANDLERS
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;

 SPJMP START JUMP TABLE FOR
 0080 DC A’SBRK’ NON-BRANCH HANDLERS
 0080 DC A’SJSRABS’
 0080 DC A’SRTI’
 0080 DC A’SRTS’
 0080 DC A’SCOP’
 0080 DC A’SJSRABSL’
 0080 DC A’SBRL’
 0080 DC A’SRTL’
 0080 DC A’SJMPABS’
 0080 DC A’SJMPABSL’
 0080 DC A’SJMPIND’
 0080 DC A’SJMPINDX’
 0080 DC A’SJMPINDL’
 0080 SCT DC A’SJSRINDX’

 END



 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;
 ; PMASK
 ; STATUS REGISTER MASKS FOR BRANCH HANDLING CODE
 ; LLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLL
 ;

 PMASK START MASKS FOR STATUS REGISTER
 80 DC H’80’ N FLAG
 40 DC H’40’ V FLAG
 01 DC H’01’ C FLAG
 02 DC H’02’ Z FLAG
 00 DC H’00’ BRA
 END





 SCODES START SPECIAL OPCODES

 10 DC H’10’ BPL
 30 DC H’30’ BMI
 50 DC H’50’ BVC
 70 DC H’70’ BVS
 90 DC H’90’ BCC
 B0 DC H’B0’ BCS
 D0 DC H’D0’ BNE
 F0 DC H’F0’ BEQ
 80 DC H’80’ BRA
 00 DC H’00’ BRK
 20 DC H’20’ JSR
 40 DC H’40’ RTI
 60 DC H’60’ RTS
 02 DC H’02’ COP
 22 DC H’22’ JSR ABSL
 82 DC H’82’ BRL
 6B DC H’6B’ RTL
 4C DC H’4C’ JMP ABS
 5C DC H’5C’ JMP ABSL
 6C DC H’6C’ JMP ()
 7C DC H’7C’ JMP (,X)
 DC DC H’DC’ JMP [ ]
 SCX ENTRY
 FC DC H’FC’ JSR (,X)
 END
 APPEND DB. TABLE


 MN DATA
 000000 DX 3
 C1C4C3 DC C’ADC’ 1
 C1C3C4 DC C’AND’ 2
 C1D3CC DC C’ASL’ 3
 C2C3C3 DC C’BCC’ 4
 C2C3D3 DC C’BCS’ 5
 C2C5D1 DC C’BEQ’ 6
 C2C9D4 DC C’BIT’ 7
 C2CDC9 DC C’BMI’ 8
 C2C3C5 DC C’BNE’ 9
 C2D0CC DC C’BPL’ 10
 C2D2CB DC C’BRK’ 11
 C2D6C3 DC C’BVC’ 12
 C2D6D3 DC C’BVS’ 13
 C3CCC3 DC C’CLC’ 14
 C3CCC4 DC C’CLD’ 15
 C3CCC9 DC C’CLI’ 16
 C3CCD6 DC C’CLV’ 17
 C3CDD0 DC C’CMP’ 18
 C3D0D8 DC C’CPX’ 19
 C3D0D9 DC C’CPY’ 20
 C4C5C3 DC C’DEC’ 21
 C4C5D8 DC C’DEX’ 22
 C4C5D9 DC C’DEY’ 23
 C5CFD2 DC C’EOR’ 24
 C9CEC3 DC C’INC’ 25
 C9C3D8 DC C’INX’ 26
 C9C3D9 DC C’INY’ 27
 CACDD0 DC C’JMP’ 28
 CAD3D2 DC C’JSR’ 29
 CCC4C1 DC C’LDA’ 30
 CCC4D8 DC C’LDX’ 31
 CCC9D9 DC C’LDY’ 32
 CDC3D2 DC C’LSR’ 33
 CECFD0 DC C’NOP’ 34
 CFD2C1 DC C’ORA’ 35
 D0C8C1 DC C’PHA’ 36
 D0C8D0 DC C’PHP’ 37
 D0CCC1 DC C’PLA’ 38
 D0CCD0 DC C’PLP’ 39
 D2CFCC DC C’ROL’ 40
 D2CFD2 DC C’ROR’ 41
 D2D4C9 DC C’RIT’ 42
 D2D4D3 DC C’RTS’ 43
 D3C2C3 DC C’SBC’ 44
 D3C5C3 DC C’SEC’ 45
 D3C5C4 DC C’SED’ 46
 D3C5C9 DC C’SEI’ 47
 D3D4C1 DC C’STA’ 48
 D3D4D8 DC C’STX’ 49
 D3D4D9 DC C’STY’ 50
 D4C1D8 DC C’TAX’ 51
 D4C1D9 DC C’TAY’ 52
 D4D3D8 DC C’TSX’ 53
 D4D8C1 DC C’TXA’ 54
 D4D8D3 DC C’TXS’ 55
 D4D9C1 DC C’TYA’ 56
 C2D2C1 DC C’BRA’ 57
 D0CCD8 DC C’PLX’ 58
 D0CCD9 DC C’PLY’ 59
 D0C8D8 DC C’PHX’ 60
 D0D8D0 DC C’PHY’ 61
 D3D4DA DC C’STZ’ 62
 D4D3C2 DC C’TRB’ 63
 D4D3C2 DC C’TSB’ 64

 D0C5C1 DC C’PEA’ 65
 D0C5C9 DC C’PEI’ 66
 D0C5D2 DC C’PER’ 67
 D0CCC2 DC C’PLB’ 68
 D0CCC4 DC C’PLD’ 69
 D0C8C2 DC C’PHB’ 70
 D0C8C4 DC C’PHD’ 71
 D0C8CB DC C’PHK’ 72

 D2C5D0 DC C’REP’ 73
 D3C5D0 DC C’SEP’ 74

 D4C3C4 DC C’TCD’ 75
 D4C4C3 DC C’TDC’ 76
 D4C3D3 DC C’TCS’ 77
 D4D3C3 DC C’TSC’ 78
 D4D8D9 DC C’TXY’ 79
 D4D9D8 DC C’TYX’ 80
 D8C2C1 DC C’XBA’ 81
 D8C3C5 DC C’XCE’ 82

 C2D2CC DC C’BRL’ 83
 CAD3CC DC C’JSL’ 84
 D2D4CC DC C’RTL’ 85
 CDD6CE DC C’MVN’ 86
 CDD6D0 DC C’MVP’ 87
 C3CFD0 DC C’COP’ 88
 D7C1C9 DC C’WAI’ 89
 D3D4D0 DC C’STP’ 100
 D7C4CD DC C’WDM’ 101
 END

 MODES DATA
 0000 DS 2
 0080 DC A’FIMM’ 1
 0080 DC A’FABS’ 2
 0080 DC A’FABSL’ 3
 0080 DC A’FDIR’ 4
 0080 DC A’FACC’ 5
 0080 DC A’FIMP’ 6
 0080 DC A’FINDINX’ 7
 0080 DC A’FINDINXL’ 8
 0080 DC A’FINXIND’ 9
 0080 DC A’FDIRINXX’ 10
 0080 DC A’FDIRINXY’ 11
 0080 DC A’FABSX’ 12
 0080 DC A’FABSLX’ 13
 0080 DC A’FABSY’ 14
 0080 DC A’FPCR’ 15
 0080 DC A’FPCRL’ 16
 0080 DC A’FABSIND’ 17
 0080 DC A’FIND’ 18
 0080 DC A’FINDL’ 19
 0080 DC A’FABSINXIND’ 20
 0080 DC A’FSTACK’ 21
 0080 DC A’FSTACKREL’ 22
 0080 DC A’FSRINDINX’ 23
 0080 DC A’FBLOCK’ 24

 END

 LENS START
 02 DC H’02’ IMM
 03 DC H’03’ ABS
 04 DC H’04’ ABS LONG
 02 DC H’02’ DIRECT
 01 DC H’01’ ACC
 01 DC H’01’ IMPLIED
 02 DC H’02’ DIR IND INX
 02 DC H’02’ DIR IND INX L
 02 DC H’02’ DIR INX IND
 02 DC H’02’ DIR INX X
 02 DC H’02’ DIR INX Y
 03 DC H’03’ ABS X
 04 DC H’04’ ABS L X
 03 DC H’03’ ABS Y
 02 DC H’02’ PCR
 03 DC H’03’ PCR L
 03 DC H’03’ ABS IND
 02 DC H’02’ DIR IND
 02 DC H’02’ DIR IND L
 03 DC H’03’ ABS INX IND
 01 DC H’01’ STACK
 02 DC H’02’ SR
 02 DC H’02’ SR INX
 03 DC H’03’ MOV
 END

 APPEND DB. ATRIB

 ATRIBL DATA

 0B06 DC I1’11,6’ BRK 00
 2309 DC I1’35,9’ ORA D,X 01
 5804 DC I1’88,4’ COP (REALLY 2) 02
 2316 DC I1’35,22’ ORA-,X 03
 4004 DC I1’64,4’ TSB D 04
 2304 DC I1’34,4’ ORA D 05
 0304 DC I1’3,4’ ASL D 06
 2313 DC I1’35,19’ ORA [D] 07
 2515 DC I1’37,21’ PHP 08
 2301 DC I1’35,1’ ORA IMM 09
 0305 DC I1’3,5’ ASL ACC 0A
 4715 DC I1’71,21’ PHD 0B
 4002 DC I1’64,2’ TSB ABS 0C
 2302 DC I1’35,2’ ORA ABS 0D
 0302 DC I1’3,2’ ASL ABS 0E
 2303 DC I1’35,3’ ORA ABS L 0F
 0A0F DC I1’10,15’ BPL 10
 2307 DC I1’35,7’ ORA (D),Y 11
 2312 DC I1’35,18’ ORA (D) 12
 2317 DC I1’35,23’ ORA S,Y 13
 3FO4 DC I1’63,4’ TRB D 14
 230A DC I1’35,10’ ORA D,X 15
 030A DC I1’3,10’ ASL D,X 16
 2308 DC I1’35,8’ ORA (DL),Y 17
 0E06 DC I1’14,6’ CLC 18
 230E DC I1’35,14’ ORA ABS,Y 19
 1905 DC I1’25,5’ NC ACC 1A
 4D06 DC I1’77,6’ TCS 1B
 3F02 DC I1’63,2’ TRB ABS,X 1C
 230C DC I1’35,12’ ORA ABS,X 1D
 030C DC I1’3,12’ ASL ABS,X 1E
 230D DC I1’35,13’ ORA ABSL,X 1F
 1D02 DC I1’29,2’ JSR ABS 20
 0207 DC I1’2,7’ AND (D, X) 21
 1D03 DC I1’29,3’ JSL ABS L 22
 0216 DC I1’2,22’ AND SR 23
 0704 DC I1’7,4’ BIT D 24
 0204 DC I1’2,4’ AND D 25
 2804 DC I1’40,4’ ROL D 26
 0213 DC I1’2,19’ AND (DL) 27
 2706 DC I1’39,6’ PLP 28
 0201 DC I1’2,1’ AND IMM 29
 2805 DC I1’40,5’ ROL ACC 2A
 4515 DC I1’69,21’ PLD 2B
 0705 DC I1’7,2’ BIT ABS 2C
 0202 DC I1’2,2’ AND ABS 2D
 28005 DC I1’40,5’ ROL A 2E
 0203 DC I1’2,3’ AND ABS L 2F
 080F DC I1’8,15’ BMI 30
 020B DC I1’2,11’ AND D,Y 31
 0212 DC I1’2,18’ AND (D) 32
 0217 DC I1’2,23’ AND (SR),Y 33
 070A DC I1’7,10’ BIT D,X 34
 020A DC I1’2,10’ AND D,X 35
 280A DC I1’40,10’ ROL D,X 36
 0208 DC I1’2,8’ AND (DL),Y 37
 2D06 DC I1’45,6’ SEC 38
 020E DC I1’25,14’ AND ABS,Y 39
 1505 DC I1’21,5’ DEC 3A
 4E06 DC I1’78,6’ TSC 3B
 070C DC I1’7,12’ BIT A,X 3C
 020C DC I1’2,12’ AND ABS,X 3D
 280C DC I1’40,12’ ROL A,X 3E
 020D DC I1’2,13’ AND AL,X 3F
 2A06 DC I1’42,6’ RTI 40
 1809 DC I1’24,9’ EOR (D,X) 41
 6506 DC I1’101,6’ WDM 42
 1816 DC I1’24,22’ EOR (D,X) 43
 5718 DC I1’87,24’ MVP 44
 1804 DC I1’24,4’ EOR D 45
 2104 DC I1’33,4’ LSR D 46
 1813 DC I1’24,19’ EOR (DL) 47
 2406 DC I1’36,6’ PHA 48
 1801 DC I1’24,1’ EOR IMM 49
 2105 DC I1’33,5’ LSR ABS L 4A
 4806 DC I1’72,6’ PHK 4B
 1C02 DC I1’28,2’ JMP ABS 4C
 1802 DC I1’24,2’ EOR ABS 4D
 2102 DC I1’33,2’ LSR ABS 4E
 1805 DC I1’24,5’ EOR ABS L 4F
 0C0F DC I1’12,15’ BVC 50
 1807 DC I1’24,7’ EOR (D),Y 51
 1812 DC I1’24,18’ EOR (D) 52
 1817 DC I1’24,23’ EOR (SR),Y 53
 56148 DC I1’86,24’ MVN 54
 180A DC I1’24,10’ EOR D,X 55
 210A DC I1’33,10’ LSR D,X 56
 1808 DC I1’24,8’ EOR (DL),Y 57
 1006 DC I1’16,6’ CLI 58
 180E DC I1’24,14’ EOR 59
 3D15 DC I1’61,21’ PHY 5A
 4B06 DC I1’75,6’ TCD 5B
 1C03 DC I1’28,3’ JMP ABSL 5C
 180C DC I1’24,12’ EOR ABS,X 5D
 210C DC I1’33,12’ LSR ABS,X 5E
 180D DC I1’24,13’ EOR ABSL,X 5F
 2B06 DC I1’43,6’ RTS 60
 0109 DC I1’1,9’ ADC (D, X) 61
 4340 DC I1’67,16’ PER 62
 0116 DC I1’1,22’ ADC SR 63
 3E04 DC I1’62,4’ STZ D 64
 0104 DC I1’1,4’ ADC D 65
 2904 DC I1’41,4’ ROR D 66
 0113 DC I1’1,19’ ADC (DL) 67
 2615 DC I1’38,21’ PLA 68
 0101 DC I1’1,1’ ADC 69
 2905 DC I1’41,5’ ROR ABSL 6A
 5506 DC I1’85,6’ RTL 6B
 1C11 DC I1’28,17’ JMP (A) 6C
 0102 DC I1’1,2’ ADC ABS 6D
 2902 DC I1’41,2’ ROR ABS 6E
 0103 DC I1’1,3’ ADC ABSL 6F
 0D0F DC I1’13,15’ BVS 70
 0108 DC I1’1,8’ ADC (D),Y 71
 0112 DC I1’1,18’ ADC (D) 72
 0117 DC I1’1,23’ ADC (SR),Y 73
 3E0A DC I1’62,10’ STZ D,X 74
 010A DC I1’1,10’ ADC D,X 75
 290A DC I1’41,10’ ROR D,X 76
 0108 DC I1’1,8’ ADC (DL),Y 77
 2F06 DC I1’47,6’ SEI 78
 010E DC I1’1,14’ ADC ABS,Y 79
 3B15 DC I1’59,21’ PLY 7A
 4C06 DC I1’76,6’ TDC 7B
 1C14 DC I1’28,20’ JMP (A, X) 7C
 010C DC I1’1,12’ ADC ABS,X 7D
 290C DC I1’41,12’ ROR ABS,X 7E
 010D DC I1’1,13’ ADC ABSL,X 7F

 END

 ATRIBH START
 390F DC I1’57,15’ BRA 80
 3009 DC I1’48,9’ STA (D, X) 81
 5310 DC I1’83,16’ BRL 82
 3016 DC I1’48,22’ STA-,S 83
 3204 DC I1’50,4’ STY D 84
 3004 DC I1’48,4’ STA D 85
 3104 DC I1’49,4’ STX D 86
 3013 DC I1’48,19’ STA [ D ] 87
 1706 DC I1’23,6’ DEY 88
 0701 DC I1’7,1’ BIT IMM 89
 3606 DC I1’54,6’ TXA 8A
 4615 DC I1’70,21’ PHB 8B
 3203 DC I1’50,2’ STY ABS 8C
 3002 DC I1’48,2’ STA ABS 8D
 3102 DC I1’49,2’ STX ABS 8E
 3003 DC I1’48,3’ STA ABS L 8F
 040F DC I1’4,15’ BC 90
 3007 DC I1’48,7’ STA (D),Y 91
 3012 DC I1’48,18’ STA (D) 92
 3017 DC I1’48,23’ STA (SR),Y 93
 320A DC I1’50,10’ STY D,X 94
 300A DC I1’48,10’ STA D,X 95
 310B DC I1’49,11’ STX D,Y 96
 3008 DC I1’48,8’ STA (DL),Y 97
 3806 DC I1’56,6’ TYA 98
 300E DC I1’48,14’ STA ABS,Y 99
 3706 DC I1’55,6’ TXS D 9A
 4F06 DC I1’79,6’ TXY 9B
 3E02 DC I1’62,2’ STZ ABS 9C
 300C DC I1’48,12’ STA ABS,X 9D
 3E0C DC I1’62,12’ STZ ABS,X 9E
 300D DC I1’48,13’ STA ABSL,X 9F
 2001 DC I1’32,1’ LDY IMM A0
 1E09 DC I1’30,9’ LDA (D,X) A1
 1F01 DC I1’31,1’ LDX IMM A2
 1E16 DC I1’30,22’ LDA SR A3
 2004 DC I1’32,4’ LDY D A4
 1E04 DC I1’30,4’ LDA D A5
 1F04 DC I1’31,4’ LDX D A6
 1E13 DC I1’30,19’ LDA (DL) A7
 3406 DC I1’52,6’ TAY A8
 1E01 DC I1’31,1’ LDA IMM A9
 3306 DC I1’51,6’ TAX AA
 4415 DC I1’68,21’ PLB AB
 2002 DC I1’32,2’ LDY ABS AC
 1E02 DC I1’30,2’ LDA ABS AD
 1F02 DC I1’31,2’ LDX ABS AE
 1E03 DC I1’30,3’ LDA ABS L AF
 050F DC I1’5,15’ BCS B0
 1E07 DC I1’30,7’ LDA (D),Y B1
 1E12 DC I1’30,18’ LDA (D) B2
 1E17 DC I1’30,23’ LDA (SR),Y B3
 200A DC I1’32,10’ LDY D,X B4
 1E0A DC I1’30,10’ LDA D,X B5
 1E0B DC I1’30,11’ LDX D,Y B6
 1E08 DC I1’30,8’ LDA (DL),Y B7
 1106 DC I1’17,6’ CLV B8
 1E0E DC I1’30,14’ LDA ABS,Y B9
 3506 DC I1’53,6’ TSX BA
 5006 DC I1’80,6’ TYX BB
 200C DC I1’32,12’ LDY ABS,X BC
 1E0C DC I1’30,12’ LDA ABS,X BD
 1F0E DC I1’31,14’ LDX ABS,Y BE
 1E0D DC I1’30,13’ LDA ABSL,X BF
 1401 DC I1’30,13’ CPY C0
 1209 DC I1’18,9’ CMP (D,X) C1
 4901 DC I1’73,1’ REP C2
 1216 DC I1’18,22’ CMP C3
 1404 DC I1’20,4’ CPY D C4
 1204 DC I1’18,4’ CMP D C5
 1504 DC I1’21,4’ DEC D C6
 1213 DC I1’18,19’ CMP (DL) C7
 1B06 DC I1’27,6’ INY C8
 1201 DC I1’18,1’ CMP IMM C9
 1606 DC I1’22,6’ DEX CA
 5906 DC I1’89,6’ WAI CB
 1402 DC I1’20,2’ CPY ABS CC
 1202 DC I1’18,2’ CMP ABS CD
 1502 DC I1’21,2’ DEC ABS CE
 1203 DC I1’18,3’ CMP ABSL CF
 090F DC I1’9,15’ BNE D0
 1207 DC I1’18,7’ CMP (D0,Y D1
 1212 DC I1’18,18’ CMP (D) D2
 1217 DC I1’18,23’ CMP D3
 4204 DC I1’66,4’ PEI D D4
 120A DC I1’18,10’ CMP D,X D5
 150A DC I1’21,10’ DEC D,X D6
 1208 DC I1’18,8’ CMP (DL),Y D7
 0F06 DC I1’15,6’ CLD D8
 120E DC I1’18,14’ CMP ABS,Y D9
 3C15 DC I1’60,21’ PHX DA
 6406 DC I1’100,6’ STP DB
 1C11 DC I1’28,17’ JMP (A) DC
 120C DC I1’18,12’ CMP ABS,X DD
 150C DC I1’21,12’ DEC ABS,X DE
 120D DC I1’18,13’ CMP ABSL,X DF
 1301 DC I1’19,1’ CPX IMM E0
 2C09 DC I1’44,9’ SBC (D,X) E1
 4A01 DC I1’74,1’ SEP IMM E2
 2C16 DC I1’44,22’ SBC SR E3
 1F04 DC I1’31,4’ LDX D E4
 2C04 DC I1’44,4’ SBC D E5
 1904 DC I1’25,4’ INC D E6
 2C13 DC I1’44,19’ SBD (DL) E7
 1A06 DC I1’26,6’ INX D E8
 2C01 DC I1’44,1’ SBC IMM E9
 2206 DC I1’34,6’ NOP EA
 5106 DC I1’81,6’ XBA EB
 1302 DC I1’19,2’ CPX ABS EC
 2C02 DC I1’44,2’ SBC ABS ED
 1902 DC I1’25,2’ INC ABS EE
 2C03 DC I1’44,3’ SBC ABSL EF
 060F DC I1’6,15’ BEQ F0
 2C07 DC I1’44,7’ SBC (D),Y F1
 2C12 DC I1’44,18’ SBC (D) F2
 2C17 DC I1’44,23’ SBC (SR),Y F3
 4102 DC I1’65,2’ PEA F4
 2C0A DC I1’44,10’ SBC D,X F5
 190A DC I1’25,10’ INC D,X F6
 2C08 DC I1’44,8’ SBC (DL),Y F7
 2E06 DC I1’46,6’ SED F8
 2C0E DC I1’44,14’ SBC ABS,Y F9
 3A15 DC I1’58,21’ PLX FA
 5206 DC I1’82,6’ XCE FB
 1D14 DC I1’29,20’ JSR (A,X) FC
 2C0C DC I1’44,12’ SBC ABS,X FD
 190C DC I1’25,12’ INC ABS,X FE
 2C0D DC I1’44,13’ SBC ABSL,X FF
 END
